<template>
    <div>
    <lightning-card variant="Narrow"  title="List of Accounts" icon-name="standard:opportunity">
        <lightning-badge class="slds-m-left_medium slds-m-right_medium badge" label="Please Select Account Below"></lightning-badge>
        <div class="slds-m-left_medium slds-m-right_medium">
            <select class = "slds-select pk" size = 2 name="accSelect" id= "accsel"  onchange={changeHandler}>
               <template for:each={accounts.data} for:item="account">
                   <option  key = {account.Id} value = {account.Id}>{account.Name}</option>
                </template>
            </select>
        </div>
        <c-new-opportunity-l-w-c class="slds-m-left_medium"></c-new-opportunity-l-w-c>
        <div class="slds-m-left_medium slds-m-right_medium ch" if:true={searchData}>   
            <lightning-datatable class="slds-table slds-table_bordered slds-table_col-bordered" data={searchData} 
            columns={columns}
            key-field="id"
            hide-checkbox-column
            onrowaction={callRowAction}>
            </lightning-datatable>
        </div>
        <div class="slds-m-left_medium slds-m-right_medium gv" if:false={emptyData}>
            <b > ********This Account Does Not Have Any Opportunities********</b>
        </div>

    </lightning-card>
    </div>
    <template if:true={bShowModal}>
        <section role="dialog" tabindex="-1"
                    aria-labelledby="modal-heading-01"
                    aria-modal="true"
                    aria-describedby="modal-content-id-1"
                    class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <!-- modal header -->
                <header class="slds-modal__header">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
                        <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small" ></lightning-icon>
                    </button>
                  
                    <h2 id="modal-heading-02" class="slds-text-heading_medium slds-hyphenate" if:true={isEditForm}>Update Opportunity Details</h2>
                </header>
        <div if:true={isEditForm} class="slds-theme_shade slds-theme_shade">
          <lightning-record-edit-form layout-type="Full" record-id={recId} object-api-name="Opportunity" onsubmit={handleSubmit} onsuccess={handleSuccess}>
          <lightning-messages></lightning-messages>
          <lightning-input-field field-name="Name"></lightning-input-field>
          <lightning-input-field field-name="Amount"></lightning-input-field>
          <lightning-input-field field-name="StageName"></lightning-input-field>
          <br/>             
          <div style="text-align:center;">
             <lightning-button class="slds-m-top_small"
                                              variant="brand"
                                              type="submit"
                                              name="update"
                                              label="Save">
              </lightning-button>
          </div>
          </lightning-record-edit-form><br/>
        </div>
        </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>   
    </template>
</template>